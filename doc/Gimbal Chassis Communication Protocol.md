# 英雄车云台底盘通信协议1.2

### 数据格式

| CmdID(1-byte) | Data(7-byte) |
| ------------- | ------------ |
| 命令码        | 数据         |

### 云台向底盘发送数据（StdId=0x401）

###### 命令码功能简介

| 命令码 | 功能说明         |
| ------ | ---------------- |
| 0x00   | 发送底盘运动数据 |
|        |                  |
|        |                  |

###### 命令码详细信息

0x00：

| 字节偏移 | 大小 | 说明                         |
| -------- | ---- | ---------------------------- |
| 0        | 1    | 运动模式（停止：0；运动，1） |
| 1        | 2    | 向前的运动速度               |
| 3        | 2    | 向右的运动速度               |
| 5        | 2    | 旋转速度                     |

结构体定义

```
typedef __packed struct
{
    uint8_t   mode;
    int16_t    VX;
    int16_t    VY;
    int16_t   W;
}chassis_move_data_t;
```



### 底盘向云台发送数据（StdId=0x402）

###### 命令码功能简介

| 命令码 | 功能说明         |
| ------ | ---------------- |
| 0x01   | 发送枪口实时数据 |
| 0x02   | 机器人状态       |
|        |                  |

###### 命令码详细信息

0x01：

| 字节偏移 | 大小 | 说明     |
| -------- | ---- | -------- |
| 0        | 1    | 弹丸射频 |
| 1        | 4    | 弹丸射速 |
| 5        | 2    | 枪口热量 |

结构体定义

```
typedef __packed struct
{
    uint8_t 	bulletFreq;
    float  	bulletSpeed;
    uint16_t   shooterHeat;
}gun_data_t;
```

0x02：

| 字节偏移 | 大小 | 说明                              |
| -------- | ---- | --------------------------------- |
| 0        | 1    | 机器人ID                          |
| 1        | 1    | 机器人等级                        |
| 2        | 2    | 机器人 42mm 枪口每秒冷却值        |
| 4        | 2    | 机器人 42mm 枪口热量上限          |
| 6        | 1    | 机器人 42mm 枪口上限速度 单位 m/s |

结构体定义

```
typedef __packed struct
{
    uint8_t 	robot_id;
    uint8_t 	robot_level;
    uint16_t 	gun_cooling_rate;
    uint16_t	gun_cooling_limit;
    uint8_t 	gun_speed_limit;
}robot_status_t;
```

